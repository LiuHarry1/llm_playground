version: '3.8'

services:
  # 后端服务
  llm-playground-service:
    build:
      context: ./llm_playground_service
      dockerfile: Dockerfile
    container_name: llm-playground-service
    ports:
      - "8000:8000"
    env_file:
      - ./llm_playground_service/.env
    environment:
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
    restart: unless-stopped
    networks:
      - llm-playground-network

  # 前端服务
  llm-playground-ui:
    build:
      context: ./llm_playground_ui
      dockerfile: Dockerfile
      args:
        # 使用相对路径，通过 nginx 反向代理到后端
        VITE_API_BASE_URL: /api
    container_name: llm-playground-ui
    ports:
      - "5173:80"
    depends_on:
      - llm-playground-service
    restart: unless-stopped
    networks:
      - llm-playground-network

networks:
  llm-playground-network:
    driver: bridge

