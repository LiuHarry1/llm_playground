# Code Review Checklist

快速代码审查清单 - 用于检查代码质量

## Python/FastAPI 后端

### 代码质量
- [ ] 函数和类名清晰易懂
- [ ] 函数职责单一（一个函数只做一件事）
- [ ] 代码没有重复（DRY 原则）
- [ ] 使用了类型提示（type hints）
- [ ] 正确使用 async/await 处理 I/O 操作
- [ ] 有适当的错误处理（try/except）

### FastAPI 特定
- [ ] API 路由使用了正确的 HTTP 方法装饰器
- [ ] 请求/响应模型使用 Pydantic 定义
- [ ] 依赖注入使用 `Depends()`
- [ ] 异常处理器已注册
- [ ] 文件上传有大小和类型验证

### 安全性
- [ ] 没有硬编码的密钥或 API Key
- [ ] 敏感配置使用环境变量
- [ ] 所有用户输入都进行了验证
- [ ] 文件上传有验证（大小、类型、内容）

### 错误处理
- [ ] 错误消息对用户友好，不暴露内部细节
- [ ] 异常在合适的层级被捕获
- [ ] 错误响应格式一致
- [ ] 日志包含错误上下文

### 性能
- [ ] 数据库查询已优化（避免 N+1 查询）
- [ ] 大文件使用流式处理
- [ ] async 函数中没有阻塞操作

### 文档
- [ ] 函数有文档字符串（docstring）
- [ ] 复杂逻辑有注释说明

---

## TypeScript/React 前端

### 代码质量
- [ ] 组件职责单一，可复用
- [ ] Props 有正确的类型定义
- [ ] 没有使用 `any` 类型（使用 `unknown` 如果类型未知）
- [ ] 正确使用 React Hooks
- [ ] 避免不必要的重新渲染（使用 memo, useMemo, useCallback）
- [ ] 代码没有重复，共享逻辑提取到 hooks 或工具函数

### React 特定
- [ ] 组件大小合适（不会太大）
- [ ] useEffect 依赖项正确
- [ ] useEffect 中有清理函数（订阅、定时器等）
- [ ] 有错误边界处理
- [ ] 正确处理加载状态
- [ ] 大组件使用代码分割（lazy loading）

### TypeScript 特定
- [ ] 函数有返回类型
- [ ] 复杂对象有接口/类型定义
- [ ] 避免不必要的类型断言（`as`）
- [ ] 使用联合类型而不是 `any`

### API 集成
- [ ] API 调用有类型定义
- [ ] API 调用有错误处理
- [ ] API 调用有加载状态
- [ ] 请求有取消机制（清理）

### 性能
- [ ] 图片已优化
- [ ] 避免不必要的重新渲染
- [ ] 大列表考虑使用虚拟化
- [ ] 考虑代码分割和打包大小

### 用户体验
- [ ] 使用语义化 HTML 元素
- [ ] 错误消息对用户友好
- [ ] 加载状态提供反馈
- [ ] 键盘导航可用

---

## 通用检查项

### 配置与环境
- [ ] 使用环境变量进行配置
- [ ] 没有硬编码应该可配置的值
- [ ] 配置文件结构合理

### 日志
- [ ] 使用合适的日志级别（DEBUG, INFO, WARNING, ERROR）
- [ ] 日志中不包含敏感信息
- [ ] 日志消息清晰可操作

### 依赖
- [ ] 没有未使用的导入
- [ ] 依赖版本合理
- [ ] 已处理已知的安全漏洞

### Git
- [ ] 提交信息有意义
- [ ] 没有提交大文件
- [ ] .gitignore 配置正确
- [ ] 提交中没有敏感数据

### 文档
- [ ] README 已更新（如需要）
- [ ] 复杂逻辑有文档说明
- [ ] API 端点有文档

---

## 使用说明

审查代码时：
1. ✅ 标记已正确完成的项
2. ⚠️ 标记需要关注的项
3. ❌ 标记缺失或错误的项
4. 提供具体的改进建议

**快速检查重点**：
- 安全性（密钥、输入验证）
- 错误处理
- 类型安全
- 性能（避免阻塞、优化查询）
- 代码可读性（命名、结构）

